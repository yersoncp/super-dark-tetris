import type { NextPage } from 'next'
import Head from 'next/head'
import { useEffect, useRef } from 'react'

const Home: NextPage = () => {

  const canvasRef = useRef<HTMLCanvasElement>(null)
  const ctx = canvasRef?.current?.getContext('2d')
  let board: any[] = []

  const initialPieces = () => {
    for (let y = 0; y < 15; y++) {
      board.push([])
      for (let x = 0; x < 10; x++) {
        board[y].push({
          color: '#ddd',
          taken: false
        })
      }
    }
    console.log(board)
  }

  const draw = () => {
    if (ctx) {
      let x = 0, y = 0;
      for (const row of board) {
        x = 0;
        for (const point of row) {
          ctx.fillStyle = point.color
          ctx.fillRect(x, y, 30, 30)
          // ctx.restore()
          ctx.strokeStyle = '#fff';
          ctx.strokeRect(x, y, 30, 30)
          x += 30
        }
        y += 30
      }

    }
  }

  useEffect(() => {
    initialPieces()
    draw()
  }, [])

  return (
    <div>
      <Head>
        <title>Create Next App</title>
        <meta name="description" content="Generated by create next app" />
        <link rel="icon" href="/favicon.ico" />
      </Head>

      <canvas ref={canvasRef} width="300" height="450"></canvas>

    </div>
  )
}

export default Home
